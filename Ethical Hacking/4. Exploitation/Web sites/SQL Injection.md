
**Windows MSSQL**
To connect to mssql server, use `impacket-mssqlclient`


! On `MYSQL`, a double dash must be followed by a space. Alternatively, use # ! 
This yields something like `...--+` with URL encoding

`information_schema.tables` contains information about databases, but not on Oracle
## Information
It may be extremely useful to gather some precious information about the dataset version and type (Oracle, mysql, ...)

Database type 	          Query
Microsoft, MySQL:  	SELECT @@version
Oracle:  	                SELECT * FROM v$version
PostgreSQL: 	        SELECT version() 
## Union Attacks
Union attacks are used to determined the type and number of the columns of a query:
```
SELECT a, b FROM tabl1 UNION c, d FROM table2
```
a and c, as well as b and d must be the same type


- Determine number of columns?
A good way is by using `ORDER BY <n>` and incrementing n until an error appears
Or an `UNION SELECT NULL,NULL,...` can also be used. Careful with this method, as with `Oracle`, you have to specify a `FROM table` after a  `UNION`. You can use the `dual` table for this

- Determine type of columns?
Once you have the number of columns, you can check which column is a string (this is mostly what we want for password) with: `UNION SELECT 'a', NULL, NULL, NULL`

- What next?
Suppose you know the number of columns (let's say 4 for example) and the types (2 can hold strings), you can perform queries to other tables (you have to know the name though) such as:
`UNION SELECT NULL,username,NULL,password FROM users`

## Blind injections
Sometimes, you cannot return any answer (text) from the server because some measures where taken. Nonetheless, you can check if some SQL injection if possible with blind queries. The goal is for example:
- Check if you observe some latency with a wait
- Check if you observe different behaviours with a FALSE statement `... AND 1=2` 

If this works, we can extract (slowly) some information about password for example: 
```
...' AND SUBSTRING((SELECT Password FROM Users WHERE Username = 'Administrator'), 1, 1) > 'm
```
This will check if the first password letter if greater than 'm'

## Obfuscated attacks
The goal of these attacks are to bypass the standard filter measures (WAF) from websites to inject your payload.
The first step of any server that receives an input is usually to decode it. You have to think exactly how your payload will be processed to bypass!

Example: any URL encoded character are not detected by WAF (web application firewall), therefore, `SELECT` will become ``%53%45%4C%45%43%54`

Another try would be to double encode your input, as some servers double decode it, but WAF may not -> % becomes %25

Try:
- case variation (`sElEct`)
- SQL comments
- url encoding
- xml encoding
- partial encoding
See more [here](https://owasp.org/www-community/attacks/SQL_Injection_Bypassing_WAF)  or [here](https://code.google.com/archive/p/teenage-mutant-ninja-turtles/wikis/BasicObfuscation.wiki) 


## MySQL

3306 / TCP

Can be footprinted via nmap --script mysql*

Accessible with `mysql`

### Useful commands

- `show databases`
- `show tables`
- `show columns from <table>`
- 